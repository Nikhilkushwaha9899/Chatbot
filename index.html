<!DOCTYPE html>
<html lang="en">
<head> 
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">   
<title>Chatbot</title>
<style>
  * {
    padding: 0;
    margin: 0;
  }

  body {
    font-family: Arial;
    background: linear-gradient(135deg, #2d1b4e 0%, #1a0f3a 50%, #3d2863 100%);
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }

  .background-animation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  .shape {
    position: absolute;
    opacity: 0.15;
    animation: float 20s infinite ease-in-out;
  }

  .shape.circle {
    border-radius: 50%;
    background: rgba(138, 43, 226,1);
  }

  .shape.square {
    background: rgba(147, 51, 234, 1);
    transform: rotate(45deg);
  }

  .shape.triangle {
    width: 0;
    height: 0;
    background: transparent;
    border-left: 75px solid transparent;
    border-right: 75px solid transparent;
    border-bottom: 130px solid rgba(168, 85, 247, 1);
  }
  .shape:nth-child(1) {
    width: 200px;
    height: 200px;
    top: 10%;
    left: 10%;
    animation-delay: 0s;
    animation-duration: 25s;
  }

  .shape:nth-child(2) {
    width: 150px;
    height: 150px;
    top: 60%;
    left: 80%;
    animation-delay: -5s;
    animation-duration: 20s;
  }

  .shape:nth-child(3) {
    width: 100px;
    height: 100px;
    top: 70%;
    left: 15%;
    animation-delay: -10s;
    animation-duration: 30s;
  }

  .shape:nth-child(4) {
    width: 180px;
    height: 180px;
    top: 20%;
    left: 75%;
    animation-delay: -15s;
    animation-duration: 22s;
  }

  .shape:nth-child(5) {
    width: 120px;
    height: 120px;
    top: 80%;
    left: 50%;
    animation-delay: -8s;
    animation-duration: 28s;
  }

  .shape:nth-child(6) {
    top: 40%;
    left: 20%;
    animation-delay: -12s;
    animation-duration: 26s;
  }

  @keyframes float {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg);
    }
    25% {
      transform: translate(30px, -30px) rotate(90deg);
    }
    50% {
      transform: translate(-20px, 20px) rotate(180deg);
    }
    75% {
      transform: translate(40px, 10px) rotate(270deg);
    }
  }
  .content-wrapper {
    position: relative;
    z-index: 1;
  }

  #chatbox {
    width: 400px;
    margin: 10px auto;
    background:linear-gradient(to top,#C797EB,#F0ECFC);
    padding: 40px;
    border-radius: 10px;
  }

  #messages {
    height: 320px;
    overflow-y: auto;
    border: 3px solid black;
    padding: 10px;
    margin-bottom: 10px;
    background:linear-gradient(to bottom,#fffafa,#f5f5f5);
    border-bottom-left-radius:7px;
    border-bottom-right-radius:7px;
  }

  .user {
    color: blue;
   
  }

  .bot {
    color: green;
  }

  input {
    width: 310px;
    padding: 12px;
    border-radius: 10px;
    border-bottom-right-radius:0;
    border-top-right-radius:0;  
  }

  button {
    padding: 10px;
    background:linear-gradient(to bottom,#003366,#0f52ba);
    border-radius: 10px;
    border: none;
    color: white;
    cursor: pointer;
    font-weight: bold;
    width:62px;
    height:42px;
    margin-left:-5px;
    border-bottom-left-radius:0;
    border-top-left-radius:0;
  }

  button:hover {
    background:linear-gradient(to bottom ,#000080,#00bfff);
  }

  h1 {
    text-align: center;
    margin-bottom: -5px;
    background:linear-gradient(to bottom,#994ECC,#3E187A);
    line-height: 2;
    color: white;
    font-family: Georgia, "Times New Roman", serif;
    font-size: 28px;
    padding: 5px;
    border-top-left-radius:20px;
    border-top-right-radius:20px;
  }

  #red {
    background:linear-gradient(to bottom,#cd1c18,#e55451);
    width: 435px;
    text-align: center;
    color: white;
    border-radius: 10px;
    padding: 20px;
    margin: 1px auto  ;
  }

  #call {
    font-weight: 900;
  }
</style>
</head>

<body>
  <div class="background-animation">
    <div class="shape circle"></div>
    <div class="shape square"></div>
    <div class="shape circle"></div>
    <div class="shape square"></div>
    <div class="shape circle"></div>
    <div class="shape triangle"></div>
  </div>

  <div class="content-wrapper">
    <div id="red">
      <div id="call">
        <p>In Intermediate Crisis?</p>
      </div>
      <div>
        <p>Call 988 or text HOME to 741741</p>
      </div>
    </div>

    <div id="chatbox">
      <h1>Suicide Helpline Chatbot</h1>
      <div id="messages"></div>
      <input type="text" id="userInput" placeholder="Type a message..." />
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    async function sendMessage() {
      let input = document.getElementById("userInput");
      let message = input.value.trim();
      if (message === "") return;

      let messagesDiv = document.getElementById("messages");
      messagesDiv.innerHTML += `<p class='user'><b>You:</b> ${message}</p>`;

      let response = await fetch("/get", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: message })
      });
      let data = await response.json();

      messagesDiv.innerHTML += `<p class='bot'><b>Bot:</b> ${data.response}</p>`;
      messagesDiv.scrollTop = messagesDiv.scrollHeight;

      input.value = "";
    }
  </script>
</body>
</html>
